---
description: 
globs: 
alwaysApply: true
---
- **Reference Latest PixiJS v8 Documentation:**
    - Always consult the official PixiJS v8 documentation for the most current API usage, best practices, and class structures: [https://pixijs.download/release/docs/index.html](mdc:https:/pixijs.download/release/docs/index.html)
    - Pay attention to core classes like `Application`, `Assets`, `Container`, `Sprite`, `Graphics`, `Text`, `Ticker`, and the `events` system.

- **Pixi-react problem solving:**
    - To solve probelms with pixi react always consult the [pixi-react-docs.md](mdc:project_docs/pixi-react-docs.md) and [refactor_prd.md](mdc:scripts/refactor_prd.md)

- **Taskmaster Context:**
    - When working on a Taskmaster task involving PixiJS (`tasks.json` or task markdown files):
        - Verify that the proposed implementation aligns with the patterns and APIs described in the v8 documentation.
        - Ensure code related to the engine refactor (@`10_POST_REFACTOR_PRD.md`) uses documented v8 features correctly (e.g., event handling, asset loading, ticker usage).

- **Project-Specific Abstractions:**
    - Apply v8 best practices to the project's custom PixiJS abstractions:
        - [`PixiEngine`](mdc:src/lib/pixi-engine/core/PixiEngine.ts) (if exists): Ensure its core methods (setup, ticker, stage access) use v8 patterns.
        - `SceneManager` (conceptual): Ensure scene loading/transitions are compatible with v8 lifecycle.
        - [`BaseGame`](mdc:src/lib/pixi-engine/game/BaseGame.ts) implementations: Ensure rendering, updates, and event handling within games use appropriate v8 APIs.
        - Core Managers ([`GameStateManager`](mdc:src/lib/pixi-engine/core/GameStateManager.ts), [`AssetLoader`](mdc:src/lib/pixi-engine/assets/AssetLoader.ts), etc.): Ensure their interactions with PixiJS objects follow v8 guidelines.

- **Key Areas from Docs to Verify:**
    - **Asset Loading:** Use the `Assets` class for loading textures, fonts, sounds, etc. ([PixiJS Assets Docs](mdc:https:/pixijs.download/release/docs/assets.html)).
    - **Event Handling:** Use the `EventSystem` and `FederatedEvent` objects for user interactions ([PixiJS Events Docs](mdc:https:/pixijs.download/release/docs/events.html)).
    - **Application Lifecycle:** Understand the `Application` setup and the `Ticker` for updates ([PixiJS App Docs](mdc:https:/pixijs.download/release/docs/app.html), [PixiJS Ticker Docs](mdc:https:/pixijs.download/release/docs/ticker.Ticker.html)).
    - **Rendering Objects:** Correctly use `Sprite`, `Graphics`, `Text`, `Container`, etc., for drawing ([PixiJS Sprite Docs](mdc:https:/pixijs.download/release/docs/sprite.Sprite.html)).

- **Using with @pixi/react and TypeScript:**
    - When using `@pixi/react` with TypeScript, ensure PIXI components are correctly extended and made available to JSX.
    - **Preferred `extend` Pattern:** Import PIXI classes, potentially with aliases, and then use these in the `extend` call. For example:
      ```typescript
      // At the top of your .tsx file
      import { extend } from '@pixi/react';
      import { Text as PixiText, Container as PixiContainer } from 'pixi.js';

      extend({ Text: PixiText, Container: PixiContainer });

      // Then, in your JSX, you can use:
      // <Text text="Hello" />
      // <pixiContainer />
      //or
        ```return <pixiGraphics draw={draw} />;```

      ```
    - This pattern helps TypeScript correctly recognize the extended components as valid JSX elements.
    - If unprefixed elements (e.g., `<Container />`) still cause type errors after `extend`, consider using the `pixi` prefixed versions (`<pixiContainer />`) which might have more readily available default types, or ensure your `tsconfig.json` and potentially a `global.d.ts` file are correctly set up to augment the JSX namespace as per `@pixi/react` documentation for advanced TypeScript scenarios. 